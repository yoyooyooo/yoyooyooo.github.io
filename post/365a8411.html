<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="Rxjs笔记（7）：辅助类操作符"/>




  <meta name="keywords" content="RXJS," />





  <link rel="alternate" href="/default" title="yooo">




  <link rel="shortcut icon" type="image/x-icon" href="/myfavicon.ico?v=1.1" />



<link rel="canonical" href="https://yoyooyooo.github.io/post/365a8411.html"/>


<meta name="description" content="功能 适用的操作符     统计数据流中产生的所有数据个数 count   获得数据流中最大或者最小的数据 max、min   对数据流中所有数据进行规约操作 reduce   判断是否所有数据都满足某个条件 every   找到第一个满足条件的数据 find、findIndex   判断一个数据流是否不包含任何数据 isEmpty   如果一个数据流为空就默认产生一个指定数据 defaul">
<meta name="keywords" content="RXJS">
<meta property="og:type" content="article">
<meta property="og:title" content="Rxjs笔记（7）：辅助类操作符">
<meta property="og:url" content="https://yoyooyooo.github.io/post/365a8411.html">
<meta property="og:site_name" content="yooo">
<meta property="og:description" content="功能 适用的操作符     统计数据流中产生的所有数据个数 count   获得数据流中最大或者最小的数据 max、min   对数据流中所有数据进行规约操作 reduce   判断是否所有数据都满足某个条件 every   找到第一个满足条件的数据 find、findIndex   判断一个数据流是否不包含任何数据 isEmpty   如果一个数据流为空就默认产生一个指定数据 defaul">
<meta property="og:updated_time" content="2018-05-30T15:36:59.867Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Rxjs笔记（7）：辅助类操作符">
<meta name="twitter:description" content="功能 适用的操作符     统计数据流中产生的所有数据个数 count   获得数据流中最大或者最小的数据 max、min   对数据流中所有数据进行规约操作 reduce   判断是否所有数据都满足某个条件 every   找到第一个满足条件的数据 find、findIndex   判断一个数据流是否不包含任何数据 isEmpty   如果一个数据流为空就默认产生一个指定数据 defaul">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> Rxjs笔记（7）：辅助类操作符 - yooo </title>
  </head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">yooo</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Rxjs笔记（7）：辅助类操作符
        
      </h1>

      <time class="post-time">
          May 30 2018
      </time>
    </header>



    
            <div class="post-content">
            <table>
<thead>
<tr>
<th style="text-align:left"><center>功能</center></th>
<th style="text-align:left"><center>适用的操作符</center></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">统计数据流中产生的所有数据个数</td>
<td style="text-align:left"><a href="#count">count</a></td>
</tr>
<tr>
<td style="text-align:left">获得数据流中最大或者最小的数据</td>
<td style="text-align:left"><a href="#max-min">max</a>、<a href="#max-min">min</a></td>
</tr>
<tr>
<td style="text-align:left">对数据流中所有数据进行规约操作</td>
<td style="text-align:left"><a href="#reduce">reduce</a></td>
</tr>
<tr>
<td style="text-align:left">判断是否所有数据都满足某个条件</td>
<td style="text-align:left"><a href="#every">every</a></td>
</tr>
<tr>
<td style="text-align:left">找到第一个满足条件的数据</td>
<td style="text-align:left"><a href="#find-findIndex">find</a>、<a href="#find-findIndex">findIndex</a></td>
</tr>
<tr>
<td style="text-align:left">判断一个数据流是否不包含任何数据</td>
<td style="text-align:left"><a href="#isEmpty">isEmpty</a></td>
</tr>
<tr>
<td style="text-align:left">如果一个数据流为空就默认产生一个指定数据</td>
<td style="text-align:left"><a href="#defaultEmpty">defaultEmpty</a></td>
</tr>
</tbody>
</table>
<h1 id="数学类操作符"><a href="#数学类操作符" class="headerlink" title="数学类操作符"></a><strong>数学类操作符</strong></h1><p>count、max、min、reduce。都是实例操作符，都会遍历上游数据流所有数据才传递给下游，所以只有上游完结的时候，才吐出一个唯一数据给下游。</p>
<h1 id="count"><a href="#count" class="headerlink" title="count"></a>count</h1><p>统计上游吐出的所有数据的个数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source$ = <span class="keyword">of</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) |&gt; concat(<span class="keyword">of</span>(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)) |&gt; count(); <span class="comment">//6</span></span><br></pre></td></tr></table></figure>
<h1 id="max-min"><a href="#max-min" class="headerlink" title="max/min"></a>max/min</h1><p>取出上游所有数据的最大值/最小值。接收一个比较函数作为参数，用于比较不是数值的数据。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source$ =</span><br><span class="line">  <span class="keyword">of</span>(&#123; <span class="attr">value</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">value</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">value</span>: <span class="number">3</span> &#125;)</span><br><span class="line">  |&gt; max(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.value - b.value); <span class="comment">//&#123; value: 3 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> source$ =</span><br><span class="line">  <span class="keyword">of</span>(&#123; <span class="attr">value</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">value</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">value</span>: <span class="number">3</span> &#125;)</span><br><span class="line">  |&gt; min(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.value - b.value); <span class="comment">//&#123; value: 1 &#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h1><p>类似 js 数组的 reduce 方法，只是处理的是 Observable 对象,接收参数的使用方法一模一样。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source$ = range(<span class="number">1</span>, <span class="number">100</span>) |&gt; reduce(<span class="function">(<span class="params">a, c</span>) =&gt;</span> a + c, <span class="number">0</span>); <span class="comment">//5050</span></span><br></pre></td></tr></table></figure>
<p>实际上其他数学类操作符都可以用 reduce 实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//reduce实现求平均数操作符</span></span><br><span class="line"><span class="keyword">const</span> average = <span class="function"><span class="params">()</span> =&gt;</span> source$ =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    source$</span><br><span class="line">    |&gt; reduce(<span class="function">(<span class="params">a, c</span>) =&gt;</span> (&#123; <span class="attr">sum</span>: a.sum + c, <span class="attr">count</span>: a.count + <span class="number">1</span> &#125;), &#123;</span><br><span class="line">      sum: <span class="number">0</span>,</span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    &#125;)</span><br><span class="line">    |&gt; map(<span class="function"><span class="params">a</span> =&gt;</span> a.sum / a.count)</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> source$ = range(<span class="number">1</span>, <span class="number">100</span>) |&gt; average(); <span class="comment">//50.5</span></span><br></pre></td></tr></table></figure>
<h1 id="every"><a href="#every" class="headerlink" title="every"></a>every</h1><p>类似于 js 数组的 every 方法，判断上游所有数据是否符合某判定函数，接受的参数和用法完全一样。如果全部符合，则最后吐出一个 true 给下游，如果有一个数据不符合，立刻吐出 false 给下游，无论 true 还是 false，every 吐出数据后会立刻完结。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source$ = range(<span class="number">1</span>, <span class="number">100</span>) |&gt; every(<span class="function"><span class="params">a</span> =&gt;</span> a &gt; <span class="number">0</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source$ = interval(<span class="number">1000</span>) |&gt; every(<span class="function"><span class="params">a</span> =&gt;</span> a &gt; <span class="number">3</span>);</span><br><span class="line">source$.subscribe(<span class="function"><span class="params">a</span> =&gt;</span> <span class="built_in">console</span>.log(a), <span class="literal">null</span>, () =&gt; <span class="built_in">console</span>.log(<span class="string">"done"</span>)); <span class="comment">//false done</span></span><br></pre></td></tr></table></figure>
<h1 id="find-findIndex"><a href="#find-findIndex" class="headerlink" title="find/findIndex"></a>find/findIndex</h1><p>用法和 js 数组的 find/findIndex 一模一样，例子懒得举了，需要注意的是</p>
<ul>
<li>如果上游用不完结且没有出现满足条件的数据，find/findIndex 会用不完结</li>
<li>如果上游所有数据都不满足条件，find 会吐出 undefined，findIndex 会吐出-1</li>
</ul>
<h1 id="isEmpty"><a href="#isEmpty" class="headerlink" title="isEmpty"></a>isEmpty</h1><p>检查 Observable 对象是不是“空的”，空的 Observable 对象指不吐出任何数据就完结的 Observable 对象。上游吐出第一个数据的时候 isEmpty 就会立刻吐出 false。如果是空的也要等上游完结的时候才会吐出 true。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> source$ =</span><br><span class="line">  Observable.create(<span class="function"><span class="params">subscriber</span> =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      subscriber.complete();</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;) |&gt; isEmpty(); <span class="comment">//2s后吐出true</span></span><br></pre></td></tr></table></figure>
<h1 id="defaultEmpty"><a href="#defaultEmpty" class="headerlink" title="defaultEmpty"></a>defaultEmpty</h1><p>如果上游是空的就吐个默认值给下游，如果不是空的，就把上游原样吐给下游什么都不干。如果上游是空的但是 defaultEmpty 不输入参数，则吐出 null</p>

            </div>
          

    
      <footer class="post-footer">
		
		<div class="post-tags">
		  
			<a href="/tags/RXJS/">RXJS</a>
		  
		</div>
		

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/post/bd06a06c.html">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Rxjs笔记（8）：过滤数据流</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/post/9348d7be.html">
        <span class="next-text nav-default">Rxjs笔记（6）：合并类操作符</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>



<div id="container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
  var gitment = new Gitment({
    owner: 'yoyooyooo',
    repo: 'yoyooyooo.github.io',
    oauth: {
      client_id: '72a814ddc6eb790d7a5d',
      client_secret: 'aa442e96984dcbd425a8131c825cc33f437d7c29',
    },
  })
  gitment.render('container')
</script>

      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2014 -
    
    2018
    <span class="footer-author">yoyo.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a> and <a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear">Polar Bear</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
