<!DOCTYPE html>
<html lang="">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="30S读懂的js代码之Aarry"/>




  <meta name="keywords" content="Javascript," />





  <link rel="alternate" href="/default" title="yooo">




  <link rel="shortcut icon" type="image/x-icon" href="/myfavicon.ico?v=1.1" />



<link rel="canonical" href="https://yoyooyooo.github.io/post/282ddb18.html"/>


<meta name="description" content="一些实用的例子，大多来自30-seconds-of-code。主要用了 ES6 语法的 map，filter，reduce 等高阶函数，函数式写法，代码优雅  数组平均数使用reduce()将每个值添加到累加器，初始值为 0，总和除以数组长度。 12const average = (arr) =&amp;gt; arr.reduce((acc, val) =&amp;gt; acc + val, 0) / ar">
<meta name="keywords" content="Javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="30S读懂的js代码之Aarry">
<meta property="og:url" content="https://yoyooyooo.github.io/post/282ddb18.html">
<meta property="og:site_name" content="yooo">
<meta property="og:description" content="一些实用的例子，大多来自30-seconds-of-code。主要用了 ES6 语法的 map，filter，reduce 等高阶函数，函数式写法，代码优雅  数组平均数使用reduce()将每个值添加到累加器，初始值为 0，总和除以数组长度。 12const average = (arr) =&amp;gt; arr.reduce((acc, val) =&amp;gt; acc + val, 0) / ar">
<meta property="og:updated_time" content="2018-02-23T16:00:55.788Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="30S读懂的js代码之Aarry">
<meta name="twitter:description" content="一些实用的例子，大多来自30-seconds-of-code。主要用了 ES6 语法的 map，filter，reduce 等高阶函数，函数式写法，代码优雅  数组平均数使用reduce()将每个值添加到累加器，初始值为 0，总和除以数组长度。 12const average = (arr) =&amp;gt; arr.reduce((acc, val) =&amp;gt; acc + val, 0) / ar">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> 30S读懂的js代码之Aarry - yooo </title>
  </head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">yooo</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          30S读懂的js代码之Aarry
        
      </h1>

      <time class="post-time">
          Feb 22 2018
      </time>
    </header>



    
            <div class="post-content">
            <blockquote>
<p>一些实用的例子，大多来自<a href="https://github.com/Chalarangelo/30-seconds-of-code" target="_blank" rel="noopener">30-seconds-of-code</a>。主要用了 ES6 语法的 map，filter，reduce 等高阶函数，函数式写法，代码优雅</p>
</blockquote>
<h1 id="数组平均数使用"><a href="#数组平均数使用" class="headerlink" title="数组平均数使用"></a><strong>数组平均数使用</strong></h1><p>reduce()将每个值添加到累加器，初始值为 0，总和除以数组长度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> average = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) / arr.length;</span><br><span class="line">average([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">//2</span></span><br></pre></td></tr></table></figure>
<h1 id="计算数组中值出现的次数"><a href="#计算数组中值出现的次数" class="headerlink" title="计算数组中值出现的次数"></a><strong>计算数组中值出现的次数</strong></h1><p>最后的一个逗号后面的 0，是这个初始值，即 a=0，这个懂 reduce 方法都知道，特别指出是，因为这个函数一定会有返回值，如果指定元素没有在数组中出现一次，返回值是 0，所以必须得初始化为 0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countOccurrences = <span class="function">(<span class="params">arr, value</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> (v === value ? a + <span class="number">1</span> : a + <span class="number">0</span>), <span class="number">0</span>);</span><br><span class="line"><span class="comment">//countOccurrences([1,1,2,1,2,3], 1) -&gt; 3</span></span><br></pre></td></tr></table></figure>
<h1 id="获取所有不是数组的元素"><a href="#获取所有不是数组的元素" class="headerlink" title="获取所有不是数组的元素"></a><strong>获取所有不是数组的元素</strong></h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deepFlatten = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(<span class="built_in">Array</span>.isArray(v) ? deepFlatten(v) : v), []);</span><br><span class="line"><span class="comment">// deepFlatten([1,[2],[[3],4],5]) -&gt; [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure>
<h1 id="返回两个数组的不同"><a href="#返回两个数组的不同" class="headerlink" title="返回两个数组的不同"></a><strong>返回两个数组的不同</strong></h1><p>先把 b 数组转成集合存到 s 中，然后去 filter 数组 a，只要把数组 a 里不存在于 s 集合中的元素返回即可。记住 filter 返回的是一个数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> difference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function">(<span class="params">x</span>) =&gt;</span> !s.has(x));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// difference([1,2,3], [1,2]) -&gt; [3]</span></span><br></pre></td></tr></table></figure>
<h1 id="过滤数组中的非唯一值"><a href="#过滤数组中的非唯一值" class="headerlink" title="过滤数组中的非唯一值"></a><strong>过滤数组中的非唯一值</strong></h1><p>将 Array.filter()用于仅包含唯一值的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filterNonUnique = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.filter(<span class="function">(<span class="params">i</span>) =&gt;</span> arr.indexOf(i) === arr.lastIndexOf(i));</span><br><span class="line"><span class="comment">//filterNonUnique([1,2,2,3,4,4,5]) -&gt; [1,3,5]</span></span><br></pre></td></tr></table></figure>
<h1 id="深度摊平数组结合"><a href="#深度摊平数组结合" class="headerlink" title="深度摊平数组结合"></a><strong>深度摊平数组结合</strong></h1><p>Array.concat()、空数组[]和 ES6 的扩展运算符…来摊平一个数组，如果摊平的元素还是一个数组，就再递归运用该方法。[].concat(…arr.map(fn))用空数组把 map 运算产生的数组进行…扩展运算值拼接成结果数组返回。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flatten = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(v), []);</span><br><span class="line"><span class="comment">//flatten([1,[2],3,4]) -&gt; [1,2,3,4]</span></span><br><span class="line"><span class="comment">//[1].concat(2) -&gt; [1,2]</span></span><br><span class="line"><span class="comment">//[1].concat("2"); -&gt; [1,"2"]</span></span><br><span class="line"><span class="comment">//concat()不改变原数组</span></span><br></pre></td></tr></table></figure>
<h1 id="浅度摊平数组-只摊平一层"><a href="#浅度摊平数组-只摊平一层" class="headerlink" title="浅度摊平数组(只摊平一层)"></a><strong>浅度摊平数组(只摊平一层)</strong></h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flatten = <span class="function">(<span class="params">arr</span>) =&gt;</span> [].concat(...arr);</span><br><span class="line"><span class="comment">// flatten([1,[2],3,4]) -&gt; [1,2,3,4]</span></span><br></pre></td></tr></table></figure>
<h1 id="数组中获取最大值"><a href="#数组中获取最大值" class="headerlink" title="数组中获取最大值*"></a><strong>数组中获取最大值*</strong></h1><p>使用 Math.max()与 spread 运算符(…)结合得到数组中的最大值,获取最小值用 Math.min()。扩展运算符取出数组的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayMax = <span class="function">(<span class="params">arr</span>) =&gt;</span> <span class="built_in">Math</span>.max(...arr);</span><br><span class="line"><span class="comment">// arrayMax([10, 1, 5]) -&gt; 10</span></span><br></pre></td></tr></table></figure>
<h1 id="array-最大公约数"><a href="#array-最大公约数" class="headerlink" title="array 最大公约数*"></a><strong>array 最大公约数*</strong></h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayGcd = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> gcd = <span class="function">(<span class="params">x, y</span>) =&gt;</span> (!y ? x : gcd(y, x % y));</span><br><span class="line">  <span class="keyword">return</span> arr.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> gcd(a, b));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// arrayGcd([1,2,3,4,5]) -&gt; 1</span></span><br><span class="line"><span class="comment">// arrayGcd([4,8,12]) -&gt; 4</span></span><br></pre></td></tr></table></figure>
<h1 id="array-最小公倍数"><a href="#array-最小公倍数" class="headerlink" title="array 最小公倍数"></a><strong>array 最小公倍数</strong></h1><p>lcm 算法用到了前面的 gcd 算法，关键点是两个数的最大公约数和最小公倍数的乘积正好就是这两个数的乘积。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayLcm = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> gcd = <span class="function">(<span class="params">x, y</span>) =&gt;</span> (!y ? x : gcd(y, x % y));</span><br><span class="line"><span class="keyword">const</span> lcm = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x \* y / gcd(x, y);</span><br><span class="line"><span class="keyword">return</span> arr.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> lcm(a, b));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//arrayLcm([1, 2, 3, 4, 5]) -&gt; 60</span></span><br></pre></td></tr></table></figure>
<h1 id="用-range-初始化数组"><a href="#用-range-初始化数组" class="headerlink" title="用 range 初始化数组"></a><strong>用 range 初始化数组</strong></h1><p>使用 Array(end-start)创建所需长度的全部都赋值为 undefined 的数组，使用 map()来填充范围中的所需值，可以省略 start 使用默认值 0。Array.apply(null, {length: 20})和 Array(20)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArrayRange = <span class="function">(<span class="params">end, start = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Array</span>.apply(<span class="literal">null</span>, <span class="built_in">Array</span>(end - start)).map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> i + start);</span><br><span class="line"><span class="comment">// initializeArrayRange(5) -&gt; [0,1,2,3,4]</span></span><br></pre></td></tr></table></figure>
<h1 id="用值初始化数组"><a href="#用值初始化数组" class="headerlink" title="用值初始化数组"></a><strong>用值初始化数组</strong></h1><p>使用 Array（n）创建所需长度的数组，fill(v)以填充所需的值，可以忽略 value 使用默认值 0。<br>arr.fill(value, start, end)，用一个固定值填充一个数组中从起始索引到终止索引内的全部元素。<br>value 用来填充数组元素的值。start 可选起始索引，默认值为 0。end 可选(终止索引，默认值为 this.length)。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArray = <span class="function">(<span class="params">n, value = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Array</span>(n).fill(value);</span><br><span class="line"><span class="comment">// initializeArray(5, 2) -&gt; [2,2,2,2,2]</span></span><br></pre></td></tr></table></figure>
<h1 id="获取数组的最后一个值"><a href="#获取数组的最后一个值" class="headerlink" title="获取数组的最后一个值"></a><strong>获取数组的最后一个值</strong></h1><p>返回 arr.slice(-1)[0]，arr.slice(begin,end)，弱参数为负数，从倒数第几个元素开始取。获取出来的是数组，加个[0]是取出数，[3][0]=3</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> last = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.slice(<span class="number">-1</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// last([1,2,3]) -&gt; 3</span></span><br></pre></td></tr></table></figure>
<h1 id="随机化数组的顺序"><a href="#随机化数组的顺序" class="headerlink" title="随机化数组的顺序"></a><strong>随机化数组的顺序</strong></h1><p>使用 sort()重新排序元素，利用 Math.random()来随机排序。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shuffle = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.sort(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>);</span><br><span class="line"><span class="comment">// shuffle([1,2,3]) -&gt; [2,3,1]</span></span><br></pre></td></tr></table></figure>
<h1 id="数组之间的相似性"><a href="#数组之间的相似性" class="headerlink" title="数组之间的相似性"></a><strong>数组之间的相似性</strong></h1><p>使用 filter()移除不是 values 的一部分值，使用 includes()确定。arr 传给 v</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> similarity = <span class="function">(<span class="params">arr, values</span>) =&gt;</span> arr.filter(<span class="function">(<span class="params">v</span>) =&gt;</span> values.includes(v));</span><br><span class="line"><span class="comment">// similarity([1,2,3], [1,2,4]) -&gt; [1,2]</span></span><br></pre></td></tr></table></figure>
<h1 id="数组总和使用"><a href="#数组总和使用" class="headerlink" title="数组总和使用"></a><strong>数组总和使用</strong></h1><p>reduce()将每个值添加到累加器，初始化值为 0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// sum([1,2,3,4]) -&gt; 10</span></span><br></pre></td></tr></table></figure>
<h1 id="数组去重使用"><a href="#数组去重使用" class="headerlink" title="数组去重使用"></a><strong>数组去重使用</strong></h1><p>ES6 Set 和… rest 操作符去掉所有重复值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unique = <span class="function">(<span class="params">arr</span>) =&gt;</span> [...new <span class="built_in">Set</span>(arr)];</span><br><span class="line"><span class="comment">// unique([1,2,2,3,4,4,5]) -&gt; [1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> unique = <span class="function">(<span class="params">arr</span>) =&gt;</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr));</span><br><span class="line"><span class="comment">// unique([1,2,2,3,4,4,5]) -&gt; [1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> unique = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.filter(<span class="function">(<span class="params">x, i, thisArg</span>) =&gt;</span> thisArg.indexOf(x) == i);</span><br><span class="line"><span class="built_in">console</span>.log(unique([<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>]));</span><br><span class="line"><span class="comment">// unique([1,2,2,3,4,4,5]) -&gt; [1,2,3,4,5]</span></span><br><span class="line"><span class="comment">// 去除重复元素依靠的是 indexOf 总是返回第一个元素的位置，后续的重复元素位置与 indexOf 返回的位置不相等，因此被 filter 滤掉了。</span></span><br></pre></td></tr></table></figure>
<h1 id="数组去重合并"><a href="#数组去重合并" class="headerlink" title="数组去重合并"></a><strong>数组去重合并</strong></h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">combine</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = [].concat.apply([], <span class="built_in">arguments</span>); <span class="comment">//没有去重复的新数组</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> m = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">  n = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(combine(m, n)); <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">combine</span>(<span class="params">...arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = [].concat.apply([], arg); <span class="comment">//没有去重复的新数组</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> m = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">  n = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(combine(m, n)); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<h1 id="切割数组"><a href="#切割数组" class="headerlink" title="切割数组"></a><strong>切割数组</strong></h1><p>按照给定的 size 将一个数组切分成含有 size 个数的更小数组块的数组。使用 Array.from()生产新的符合定义的数组。使用 Array.slice()来截取指定 size 个元素组成新的数组块。如果原数组长度不能被 size 整除，最后的剩余的那些元素将归属于最后一个块。<br>Math.ceil 向上取整，length 指定了迭代次数，它正好按照 size 分块后的数组长度正好就是原数组长度除以 size 向上取整的值。向上取整就是为了满足不能完全整除的情况。比如 5 个元素按照 2 个进行分块，分了两块两个元素的，剩最后一个元素成了独立块，总共 3 个元素。<br>(v, i)，由于迭代的时候数组在每一个位置上都是以 undefined 初始化的，所以 v 一直都是 undefined。<br>arr.slice(i _ size, i _ size + size)迭代过程中每次截取 size 个数的元素组成新数组。这里的 i 就是随着迭代变化，比如 size 是 3，就分别截取[0,3),[3,6),[6,9)…</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> chunk = <span class="function">(<span class="params">arr, size</span>) =&gt;</span></span><br><span class="line"><span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: <span class="built_in">Math</span>.ceil(arr.length / size) &#125;, (v, i) =&gt;</span><br><span class="line">arr.slice(i _ size, i _ size + size)</span><br><span class="line">);</span><br><span class="line"><span class="comment">//chunk([1, 2, 3, 4, 5], 2) -&gt; [ [ 1, 2 ], [ 3, 4 ], [ 5 ] ]</span></span><br></pre></td></tr></table></figure>
<h1 id="移除掉数组里不能用的的元素-false-NAN-””-undefined"><a href="#移除掉数组里不能用的的元素-false-NAN-””-undefined" class="headerlink" title="移除掉数组里不能用的的元素(false,NAN,””,undefined)"></a><strong>移除掉数组里不能用的的元素(false,NAN,””,undefined)</strong></h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compact = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.filter(<span class="built_in">Boolean</span>);</span><br><span class="line"><span class="comment">//compact([0, 1, false, 2, "", 3, "a", "e" * 23, NaN, "s", 34]) -&gt; [ 1, 2, 3, 'a', 's', 34 ]</span></span><br></pre></td></tr></table></figure>
<h1 id="从一个数组中筛选出所有不满足指定比较方法运算结果为-true-的元素值的数组"><a href="#从一个数组中筛选出所有不满足指定比较方法运算结果为-true-的元素值的数组" class="headerlink" title="从一个数组中筛选出所有不满足指定比较方法运算结果为 true 的元素值的数组"></a><strong>从一个数组中筛选出所有不满足指定比较方法运算结果为 true 的元素值的数组</strong></h1><p>遍历数组 arr 的所有元素，然后在数组 val 里寻找 comp 运算结果不为 true 的值。因为 val.find()方法如果找到就返回该值，否则返回 undefined，此时!val.find()就是 true，arr.filter()正是需要这样运算结果的值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> differenceWith = <span class="function">(<span class="params">arr, val, comp</span>) =&gt;</span> arr.filter(<span class="function">(<span class="params">a</span>) =&gt;</span> !val.find(<span class="function">(<span class="params">b</span>) =&gt;</span> comp(a, b)));</span><br><span class="line"><span class="comment">// differenceWith([1, 1.2, 1.5, 3], [1.9, 3], (a,b) =&gt; Math.round(a) == Math.round(b)) -&gt; [1, 1.2]</span></span><br></pre></td></tr></table></figure>
<h1 id="返回数组元素-nth-整数倍的数组"><a href="#返回数组元素-nth-整数倍的数组" class="headerlink" title="返回数组元素 nth 整数倍的数组"></a><strong>返回数组元素 nth 整数倍的数组</strong></h1><p>或许(e, i) =&gt; (i + 1) % nth === 0 更好理解</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> everyNth = <span class="function">(<span class="params">arr, nth</span>) =&gt;</span> arr.filter(<span class="function">(<span class="params">e, i</span>) =&gt;</span> i % nth === nth - <span class="number">1</span>);</span><br><span class="line"><span class="comment">// everyNth([1,2,3,4,5,6], 2) -&gt; [ 2, 4, 6 ]</span></span><br></pre></td></tr></table></figure>

            </div>
          

    
      <footer class="post-footer">
		
		<div class="post-tags">
		  
			<a href="/tags/Javascript/">Javascript</a>
		  
		</div>
		

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/post/d88ffb6f.html">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">30S读懂的js代码之杂</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/post/a66fee9d.html">
        <span class="next-text nav-default">redux文档整理(一)</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>



<div id="container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
  var gitment = new Gitment({
    owner: 'yoyooyooo',
    repo: 'yoyooyooo.github.io',
    oauth: {
      client_id: '72a814ddc6eb790d7a5d',
      client_secret: 'aa442e96984dcbd425a8131c825cc33f437d7c29',
    },
  })
  gitment.render('container')
</script>

      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2014 -
    
    2018
    <span class="footer-author">yoyo.</span>
    <span class="power-by">
        由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> and <a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear">Polar Bear</a> 强力驱动
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
