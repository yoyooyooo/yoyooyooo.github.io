{"data":{"site":{"siteMetadata":{"title":"yoyo","author":"yoyo"}},"markdownRemark":{"id":"62c3e2b4-6605-507f-9908-0cacfd3cf13a","excerpt":"一般写法： 指定一个初始 style(defaultStyle)，然后赋值一个目标 style(style)，中间每帧都会由 react-motion 计算出对应的 style，用户只管使用生成的 style(interpolatingStyle)，不用关心物理效果的实现，动画中断的处理 spring spring…","html":"<h1><strong>一般写法：</strong></h1>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Motion</span> <span class=\"token attr-name\">defaultStyle</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> left<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> left<span class=\"token punctuation\">:</span> <span class=\"token function\">spring</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>interpolatingStyle <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>interpolatingStyle<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Motion</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>指定一个初始 style(defaultStyle)，然后赋值一个目标 style(style)，中间每帧都会由 react-motion 计算出对应的 style，用户只管使用生成的 style(interpolatingStyle)，不用关心物理效果的实现，动画中断的处理</p>\n<h1><strong>spring</strong></h1>\n<p>spring(val,config)，config 里包含 stiffness、damping 和 precision。如 spring(10, {stiffness: 120, damping: 17})\n把我们要设置动画的物体想象成弹簧</p>\n<ul>\n<li>val：终点值，即你希望达到的最后状态的数值，number 类型</li>\n<li>\n<p>config：可选。用于生成物理效果的配置</p>\n<ul>\n<li>stiffness：相当于弹簧的强度，其影响的是弹簧回弹的速度，stiffness 越大，回弹速度越快</li>\n<li>damping：弹簧的减震性，其影响的是弹簧的回弹次数，damping 越大，回弹次数越少 3. precision：用于配置 val 的精确度，一般用默认的 0.01 就行</li>\n</ul>\n</li>\n</ul>\n<p>{stiffness, damping}可以设置预设值，<a href=\"https://github.com/chenglou/react-motion/blob/9cb90eca20ecf56e77feb816d101a4a9110c7d70/src/presets.js\">Presets</a> = {stiffness, damping}。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">presets <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  noWobble<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> stiffness<span class=\"token punctuation\">:</span> <span class=\"token number\">170</span><span class=\"token punctuation\">,</span> damping<span class=\"token punctuation\">:</span> <span class=\"token number\">26</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// the default, if nothing provided</span>\n  gentle<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> stiffness<span class=\"token punctuation\">:</span> <span class=\"token number\">120</span><span class=\"token punctuation\">,</span> damping<span class=\"token punctuation\">:</span> <span class=\"token number\">14</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  wobbly<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> stiffness<span class=\"token punctuation\">:</span> <span class=\"token number\">180</span><span class=\"token punctuation\">,</span> damping<span class=\"token punctuation\">:</span> <span class=\"token number\">12</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  stiff<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> stiffness<span class=\"token punctuation\">:</span> <span class=\"token number\">210</span><span class=\"token punctuation\">,</span> damping<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>用法：</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> presets <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-motion'</span><span class=\"token punctuation\">;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Motion</span> <span class=\"token attr-name\">defaultStyle</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> left<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> left<span class=\"token punctuation\">:</span> <span class=\"token function\">spring</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> presets<span class=\"token punctuation\">.</span>wobbly<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>interpolatingStyle <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>interpolatingStyle<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Motion</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1><strong>Motion</strong></h1>\n<p>该动画组件内部往往只有一个直接子组件，也就是只有一个动画目标。</p>\n<h2>基本用法：</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Motion</span>\n  <span class=\"token attr-name\">defaultStyle</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">:</span> <span class=\"token function\">spring</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">onRest</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>\n  interpolatingStyle <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>interpolatingStyle<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>interpolatingStyle<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Motion</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li>defaultStyle?: PlainStyle，可选参数，PlainStyle 指的就是 React 常用作行内样式的对象类型的 { width: '10px', height: '10px' }，见名知意，为动画设定初始值</li>\n<li>style: Style，必选参数，指定动画完成的目标值，并设定动画的变化类型，实际上是一种数据驱动的形式</li>\n<li>onRest?: () => void，可选参数，在动画完成后调用</li>\n<li>children: (interpolatedStyle: PlainStyle) => ReactElement，必选函数，接收一个从初始值到目标值中间的值，这个值不断变化，用于渲染子组件的样式</li>\n</ul>\n<iframe src=\"https://codesandbox.io/embed/91lo67mony\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n<h1><strong>StaggeredMotion</strong></h1>\n<p>该动画组件内部有一个或多个直接子组件，多个子组件之间的动画效果有关联性。</p>\n<iframe src=\"https://codesandbox.io/embed/vvylxvkqjy\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n<h1><strong>TransitionMotion</strong></h1>\n<p>该动画组件内部的一个或多个组件可以卸载或挂载，提供 Enter 和 Leave 动画效果。</p>\n<iframe src=\"https://codesandbox.io/embed/r74l9p487q\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>","frontmatter":{"title":"react-motion笔记","date":"2018.02.27"}}},"pageContext":{"slug":"/artical/react-motion笔记/","previous":{"fields":{"slug":"/artical/rx1/"},"frontmatter":{"title":"Rxjs笔记（1）"}},"next":{"fields":{"slug":"/artical/实用css片段/"},"frontmatter":{"title":"实用css片段"}}}}